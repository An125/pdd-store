# 微信支付步骤

##1.获取微信支付配置参数；

微信支付参数需要的有3个:a.微信分配的公众账号ID（appid）;b.微信支付分配的商户号（mch_id/PartnerId）；c.商户密钥（PartnerKey）

##2.调用统一下单接口，生成预支付订单号;

##3.生成带支付签名的订单凭据并返回

##4.调起微信支付（发起微信支付请求）

##5.向用户展示支付结果，支付成功后微信异步回调填写的支付通知地址

##6.查询订单支付状态

此处调用微信支付查询接口，查询订单支付情况。支付成功需要修改自己本地订单状态，并验证支付金额是否一致。

##7.返回支付订单信息，向用户展示支付结果

查询订单完成后，先用户展示订单详情页面数据。

##8.发送支付模版消息

最后在验证订单无误时，发送微信支付模版信息给微信支付用户。

注意点：需要在微信支付后台配置支付测试参数：

1.测试目录的配置具体查看微信支付开发文档会员详细的说明；

2.配置测试白名单（微信号）

##注意 此示例中没有添加获取openid的方法，使用时先添加此方法，在预支付订单中添加对应的参数即可完成微信支付功能。